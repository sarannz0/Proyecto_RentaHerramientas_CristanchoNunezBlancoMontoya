openapi: 3.1.0
info:
  title: SecurityApp API
  description: |
    API de autenticación y autorización construida con Spring Boot y Spring Security 6.

    ## Autenticación
    Esta API usa JWT (JSON Web Tokens) para autenticación. Para acceder a los endpoints protegidos:

    1. Registra un usuario con `POST /auth/register`
    2. Inicia sesión con `POST /auth/login` para obtener un access token y refresh token
    3. Incluye el token en el header: `Authorization: Bearer <access_token>`

    ## Refresh Token
    Cuando el access token expire, usa `POST /auth/refresh` con el refresh token para obtener un nuevo access token.

    ## Roles
    - **ROLE_USER**: Usuario estándar (asignado por defecto)
    - **ROLE_ADMIN**: Administrador (requerido para asignar roles)
    - **ROLE_MODERATOR**: Moderador
  contact:
    name: SecurityApp Support
    email: support@bkseducate.com
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.0
servers:
- url: http://localhost:8080
  description: Servidor de desarrollo
- url: https://api.example.com
  description: Servidor de producción
tags:
- name: Gestión Usuarios
  description: Endpoints para administración de usuarios y roles
- name: Proveedores
  description: Gestión de proveedores (registro de usuarios tipo SUPPLIER)
- name: Facturas
  description: Gestión de facturas
- name: Pagos
  description: Gestión de pagos de alquileres
- name: Solicitudes de Renta
  description: Gestión de solicitudes de alquiler para proveedores
- name: Catálogo Herramientas
  description: Gestión del catálogo de herramientas
- name: Alquileres
  description: Gestión de alquileres de herramientas
- name: Países
  description: Endpoints para consulta de información de países
- name: Autenticación
  description: "Endpoints para registro, login, refresh token y gestión de sesión"
- name: Items Herramientas
  description: Gestión de los items físicos de herramientas
paths:
  /users/{userId}/roles:
    put:
      tags:
      - Gestión Usuarios
      summary: Asignar rol a usuario
      description: Asigna un rol específico a un usuario. Requiere rol ADMIN.
      operationId: assignRole
      parameters:
      - name: userId
        in: path
        description: ID del usuario
        required: true
        schema:
          type: string
          format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AssignRoleRequest"
        required: true
      responses:
        "200":
          description: Rol asignado exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere ADMIN)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Usuario no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /users/update/{userId}:
    put:
      tags:
      - Gestión Usuarios
      summary: Actualizar usuario por ADMIN
      description: ADMIN actualiza información no sensible de un usuario.
      operationId: updateUserByAdmin
      parameters:
      - name: userId
        in: path
        description: ID del usuario
        required: true
        schema:
          type: string
          format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRequest"
        required: true
      responses:
        "200":
          description: Actualizado correctamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserUpdateResponse"
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere ADMIN)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Usuario no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /users/update/me:
    put:
      tags:
      - Gestión Usuarios
      summary: Actualizar propios datos
      description: Usuario autenticado actualiza su propia información. Requiere autenticación.
      operationId: updateUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRequest"
        required: true
      responses:
        "200":
          description: Actualizado correctamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserUpdateResponse"
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Usuario no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /users/status:
    put:
      tags:
      - Gestión Usuarios
      summary: Cambiar estado de usuario
      description: Bloquea o activa un usuario. Requiere rol ADMIN.
      operationId: setStatus
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StatusUserRequest"
        required: true
      responses:
        "200":
          description: Estado actualizado exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/StatusUserResponse"
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere ADMIN)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Usuario no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tools/update/{catalogId}:
    put:
      tags:
      - Catálogo Herramientas
      summary: Actualizar catálogo de herramientas
      description: Actualiza la información e imagen de un catálogo. Requiere rol
        SUPPLIER.
      operationId: updateToolCatalog
      parameters:
      - name: catalogId
        in: path
        description: ID del catálogo
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                imgFile:
                  type: string
                  format: binary
                  description: Imagen de la herramienta
                request:
                  type: string
                  description: JSON string of ToolCatalogUpdateRequest
              required:
              - imgFile
              - request
      responses:
        "200":
          description: Actualizado exitosamente
          content:
            '*/*':
              schema:
                type: string
                enum:
                - 100 CONTINUE
                - 101 SWITCHING_PROTOCOLS
                - 102 PROCESSING
                - 103 EARLY_HINTS
                - 200 OK
                - 201 CREATED
                - 202 ACCEPTED
                - 203 NON_AUTHORITATIVE_INFORMATION
                - 204 NO_CONTENT
                - 205 RESET_CONTENT
                - 206 PARTIAL_CONTENT
                - 207 MULTI_STATUS
                - 208 ALREADY_REPORTED
                - 226 IM_USED
                - 300 MULTIPLE_CHOICES
                - 301 MOVED_PERMANENTLY
                - 302 FOUND
                - 303 SEE_OTHER
                - 304 NOT_MODIFIED
                - 307 TEMPORARY_REDIRECT
                - 308 PERMANENT_REDIRECT
                - 400 BAD_REQUEST
                - 401 UNAUTHORIZED
                - 402 PAYMENT_REQUIRED
                - 403 FORBIDDEN
                - 404 NOT_FOUND
                - 405 METHOD_NOT_ALLOWED
                - 406 NOT_ACCEPTABLE
                - 407 PROXY_AUTHENTICATION_REQUIRED
                - 408 REQUEST_TIMEOUT
                - 409 CONFLICT
                - 410 GONE
                - 411 LENGTH_REQUIRED
                - 412 PRECONDITION_FAILED
                - 413 CONTENT_TOO_LARGE
                - 413 PAYLOAD_TOO_LARGE
                - 414 URI_TOO_LONG
                - 415 UNSUPPORTED_MEDIA_TYPE
                - 416 REQUESTED_RANGE_NOT_SATISFIABLE
                - 417 EXPECTATION_FAILED
                - 418 I_AM_A_TEAPOT
                - 421 MISDIRECTED_REQUEST
                - 422 UNPROCESSABLE_CONTENT
                - 422 UNPROCESSABLE_ENTITY
                - 423 LOCKED
                - 424 FAILED_DEPENDENCY
                - 425 TOO_EARLY
                - 426 UPGRADE_REQUIRED
                - 428 PRECONDITION_REQUIRED
                - 429 TOO_MANY_REQUESTS
                - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
                - 451 UNAVAILABLE_FOR_LEGAL_REASONS
                - 500 INTERNAL_SERVER_ERROR
                - 501 NOT_IMPLEMENTED
                - 502 BAD_GATEWAY
                - 503 SERVICE_UNAVAILABLE
                - 504 GATEWAY_TIMEOUT
                - 505 HTTP_VERSION_NOT_SUPPORTED
                - 506 VARIANT_ALSO_NEGOTIATES
                - 507 INSUFFICIENT_STORAGE
                - 508 LOOP_DETECTED
                - 509 BANDWIDTH_LIMIT_EXCEEDED
                - 510 NOT_EXTENDED
                - 511 NETWORK_AUTHENTICATION_REQUIRED
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Catálogo no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tool/item/update/status/{itemId}:
    put:
      tags:
      - Items Herramientas
      summary: Actualizar estado físico de un ítem
      description: "Cambia el estado (e.g. DAMAGED, MAINTENANCE) de un ítem. Requiere\
        \ rol SUPPLIER."
      operationId: updateStatus
      parameters:
      - name: itemId
        in: path
        description: ID del ítem
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ToolUpdateStatusRequest"
        required: true
      responses:
        "200":
          description: Estado actualizado
          content:
            '*/*':
              schema:
                type: string
                enum:
                - 100 CONTINUE
                - 101 SWITCHING_PROTOCOLS
                - 102 PROCESSING
                - 103 EARLY_HINTS
                - 200 OK
                - 201 CREATED
                - 202 ACCEPTED
                - 203 NON_AUTHORITATIVE_INFORMATION
                - 204 NO_CONTENT
                - 205 RESET_CONTENT
                - 206 PARTIAL_CONTENT
                - 207 MULTI_STATUS
                - 208 ALREADY_REPORTED
                - 226 IM_USED
                - 300 MULTIPLE_CHOICES
                - 301 MOVED_PERMANENTLY
                - 302 FOUND
                - 303 SEE_OTHER
                - 304 NOT_MODIFIED
                - 307 TEMPORARY_REDIRECT
                - 308 PERMANENT_REDIRECT
                - 400 BAD_REQUEST
                - 401 UNAUTHORIZED
                - 402 PAYMENT_REQUIRED
                - 403 FORBIDDEN
                - 404 NOT_FOUND
                - 405 METHOD_NOT_ALLOWED
                - 406 NOT_ACCEPTABLE
                - 407 PROXY_AUTHENTICATION_REQUIRED
                - 408 REQUEST_TIMEOUT
                - 409 CONFLICT
                - 410 GONE
                - 411 LENGTH_REQUIRED
                - 412 PRECONDITION_FAILED
                - 413 CONTENT_TOO_LARGE
                - 413 PAYLOAD_TOO_LARGE
                - 414 URI_TOO_LONG
                - 415 UNSUPPORTED_MEDIA_TYPE
                - 416 REQUESTED_RANGE_NOT_SATISFIABLE
                - 417 EXPECTATION_FAILED
                - 418 I_AM_A_TEAPOT
                - 421 MISDIRECTED_REQUEST
                - 422 UNPROCESSABLE_CONTENT
                - 422 UNPROCESSABLE_ENTITY
                - 423 LOCKED
                - 424 FAILED_DEPENDENCY
                - 425 TOO_EARLY
                - 426 UPGRADE_REQUIRED
                - 428 PRECONDITION_REQUIRED
                - 429 TOO_MANY_REQUESTS
                - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
                - 451 UNAVAILABLE_FOR_LEGAL_REASONS
                - 500 INTERNAL_SERVER_ERROR
                - 501 NOT_IMPLEMENTED
                - 502 BAD_GATEWAY
                - 503 SERVICE_UNAVAILABLE
                - 504 GATEWAY_TIMEOUT
                - 505 HTTP_VERSION_NOT_SUPPORTED
                - 506 VARIANT_ALSO_NEGOTIATES
                - 507 INSUFFICIENT_STORAGE
                - 508 LOOP_DETECTED
                - 509 BANDWIDTH_LIMIT_EXCEEDED
                - 510 NOT_EXTENDED
                - 511 NETWORK_AUTHENTICATION_REQUIRED
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Ítem no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tool/item/update/avaible/{itemId}/{bool}:
    put:
      tags:
      - Items Herramientas
      summary: Actualizar disponibilidad de un ítem
      description: Habilita o deshabilita la disponibilidad de un ítem. Requiere rol
        SUPPLIER.
      operationId: updateAvaiable
      parameters:
      - name: itemId
        in: path
        description: ID del ítem
        required: true
        schema:
          type: string
          format: uuid
      - name: bool
        in: path
        description: Disponible (true/false)
        required: true
        schema:
          type: boolean
      responses:
        "200":
          description: Disponibilidad actualizada
          content:
            '*/*':
              schema:
                type: string
                enum:
                - 100 CONTINUE
                - 101 SWITCHING_PROTOCOLS
                - 102 PROCESSING
                - 103 EARLY_HINTS
                - 200 OK
                - 201 CREATED
                - 202 ACCEPTED
                - 203 NON_AUTHORITATIVE_INFORMATION
                - 204 NO_CONTENT
                - 205 RESET_CONTENT
                - 206 PARTIAL_CONTENT
                - 207 MULTI_STATUS
                - 208 ALREADY_REPORTED
                - 226 IM_USED
                - 300 MULTIPLE_CHOICES
                - 301 MOVED_PERMANENTLY
                - 302 FOUND
                - 303 SEE_OTHER
                - 304 NOT_MODIFIED
                - 307 TEMPORARY_REDIRECT
                - 308 PERMANENT_REDIRECT
                - 400 BAD_REQUEST
                - 401 UNAUTHORIZED
                - 402 PAYMENT_REQUIRED
                - 403 FORBIDDEN
                - 404 NOT_FOUND
                - 405 METHOD_NOT_ALLOWED
                - 406 NOT_ACCEPTABLE
                - 407 PROXY_AUTHENTICATION_REQUIRED
                - 408 REQUEST_TIMEOUT
                - 409 CONFLICT
                - 410 GONE
                - 411 LENGTH_REQUIRED
                - 412 PRECONDITION_FAILED
                - 413 CONTENT_TOO_LARGE
                - 413 PAYLOAD_TOO_LARGE
                - 414 URI_TOO_LONG
                - 415 UNSUPPORTED_MEDIA_TYPE
                - 416 REQUESTED_RANGE_NOT_SATISFIABLE
                - 417 EXPECTATION_FAILED
                - 418 I_AM_A_TEAPOT
                - 421 MISDIRECTED_REQUEST
                - 422 UNPROCESSABLE_CONTENT
                - 422 UNPROCESSABLE_ENTITY
                - 423 LOCKED
                - 424 FAILED_DEPENDENCY
                - 425 TOO_EARLY
                - 426 UPGRADE_REQUIRED
                - 428 PRECONDITION_REQUIRED
                - 429 TOO_MANY_REQUESTS
                - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
                - 451 UNAVAILABLE_FOR_LEGAL_REASONS
                - 500 INTERNAL_SERVER_ERROR
                - 501 NOT_IMPLEMENTED
                - 502 BAD_GATEWAY
                - 503 SERVICE_UNAVAILABLE
                - 504 GATEWAY_TIMEOUT
                - 505 HTTP_VERSION_NOT_SUPPORTED
                - 506 VARIANT_ALSO_NEGOTIATES
                - 507 INSUFFICIENT_STORAGE
                - 508 LOOP_DETECTED
                - 509 BANDWIDTH_LIMIT_EXCEEDED
                - 510 NOT_EXTENDED
                - 511 NETWORK_AUTHENTICATION_REQUIRED
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Ítem no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /rent-request/status/{id}:
    put:
      tags:
      - Solicitudes de Renta
      summary: Actualizar estado de solicitud
      description: Acepta o rechaza una solicitud de renta. Requiere rol SUPPLIER.
      operationId: updateStatus_1
      parameters:
      - name: id
        in: path
        description: ID de la solicitud
        required: true
        schema:
          type: string
          format: uuid
      - name: status
        in: query
        description: "Nuevo estado (ACCEPTED, DENEGED)"
        required: true
        schema:
          type: string
          enum:
          - ACCEPTED
          - PENDING
          - DENEGED
      responses:
        "200":
          description: Estado actualizado exitosamente
        "403":
          description: No autorizado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Solicitud no encontrada
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /auth/change-password:
    put:
      tags:
      - Autenticación
      summary: Cambiar contraseña
      description: Permite al usuario autenticado cambiar su contraseña. Requiere
        la contraseña actual. Requiere autenticación.
      operationId: changePassword
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangePasswordRequest"
        required: true
      responses:
        "204":
          description: Contraseña cambiada exitosamente
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Contraseña actual incorrecta o no autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tools:
    post:
      tags:
      - Catálogo Herramientas
      summary: Crear catálogo de herramientas
      description: Crea un nuevo catálogo de herramientas con imagen. Requiere rol
        SUPPLIER.
      operationId: createToolCatalog
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                imgFile:
                  type: string
                  format: binary
                  description: Imagen de la herramienta
                request:
                  type: string
                  description: JSON string of ToolCatalogRequest (serialized)
              required:
              - imgFile
              - request
      responses:
        "200":
          description: Catálogo creado exitosamente
          content:
            '*/*':
              schema:
                type: string
                enum:
                - 100 CONTINUE
                - 101 SWITCHING_PROTOCOLS
                - 102 PROCESSING
                - 103 EARLY_HINTS
                - 200 OK
                - 201 CREATED
                - 202 ACCEPTED
                - 203 NON_AUTHORITATIVE_INFORMATION
                - 204 NO_CONTENT
                - 205 RESET_CONTENT
                - 206 PARTIAL_CONTENT
                - 207 MULTI_STATUS
                - 208 ALREADY_REPORTED
                - 226 IM_USED
                - 300 MULTIPLE_CHOICES
                - 301 MOVED_PERMANENTLY
                - 302 FOUND
                - 303 SEE_OTHER
                - 304 NOT_MODIFIED
                - 307 TEMPORARY_REDIRECT
                - 308 PERMANENT_REDIRECT
                - 400 BAD_REQUEST
                - 401 UNAUTHORIZED
                - 402 PAYMENT_REQUIRED
                - 403 FORBIDDEN
                - 404 NOT_FOUND
                - 405 METHOD_NOT_ALLOWED
                - 406 NOT_ACCEPTABLE
                - 407 PROXY_AUTHENTICATION_REQUIRED
                - 408 REQUEST_TIMEOUT
                - 409 CONFLICT
                - 410 GONE
                - 411 LENGTH_REQUIRED
                - 412 PRECONDITION_FAILED
                - 413 CONTENT_TOO_LARGE
                - 413 PAYLOAD_TOO_LARGE
                - 414 URI_TOO_LONG
                - 415 UNSUPPORTED_MEDIA_TYPE
                - 416 REQUESTED_RANGE_NOT_SATISFIABLE
                - 417 EXPECTATION_FAILED
                - 418 I_AM_A_TEAPOT
                - 421 MISDIRECTED_REQUEST
                - 422 UNPROCESSABLE_CONTENT
                - 422 UNPROCESSABLE_ENTITY
                - 423 LOCKED
                - 424 FAILED_DEPENDENCY
                - 425 TOO_EARLY
                - 426 UPGRADE_REQUIRED
                - 428 PRECONDITION_REQUIRED
                - 429 TOO_MANY_REQUESTS
                - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
                - 451 UNAVAILABLE_FOR_LEGAL_REASONS
                - 500 INTERNAL_SERVER_ERROR
                - 501 NOT_IMPLEMENTED
                - 502 BAD_GATEWAY
                - 503 SERVICE_UNAVAILABLE
                - 504 GATEWAY_TIMEOUT
                - 505 HTTP_VERSION_NOT_SUPPORTED
                - 506 VARIANT_ALSO_NEGOTIATES
                - 507 INSUFFICIENT_STORAGE
                - 508 LOOP_DETECTED
                - 509 BANDWIDTH_LIMIT_EXCEEDED
                - 510 NOT_EXTENDED
                - 511 NETWORK_AUTHENTICATION_REQUIRED
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tool/item/create/{catalogId}:
    post:
      tags:
      - Items Herramientas
      summary: Crear ítem de herramienta
      description: Crea un ítem físico asociado a un catálogo. Requiere rol SUPPLIER.
      operationId: create
      parameters:
      - name: catalogId
        in: path
        description: ID del catálogo
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "201":
          description: Item creado exitosamente
          content:
            '*/*':
              schema:
                type: string
                enum:
                - 100 CONTINUE
                - 101 SWITCHING_PROTOCOLS
                - 102 PROCESSING
                - 103 EARLY_HINTS
                - 200 OK
                - 201 CREATED
                - 202 ACCEPTED
                - 203 NON_AUTHORITATIVE_INFORMATION
                - 204 NO_CONTENT
                - 205 RESET_CONTENT
                - 206 PARTIAL_CONTENT
                - 207 MULTI_STATUS
                - 208 ALREADY_REPORTED
                - 226 IM_USED
                - 300 MULTIPLE_CHOICES
                - 301 MOVED_PERMANENTLY
                - 302 FOUND
                - 303 SEE_OTHER
                - 304 NOT_MODIFIED
                - 307 TEMPORARY_REDIRECT
                - 308 PERMANENT_REDIRECT
                - 400 BAD_REQUEST
                - 401 UNAUTHORIZED
                - 402 PAYMENT_REQUIRED
                - 403 FORBIDDEN
                - 404 NOT_FOUND
                - 405 METHOD_NOT_ALLOWED
                - 406 NOT_ACCEPTABLE
                - 407 PROXY_AUTHENTICATION_REQUIRED
                - 408 REQUEST_TIMEOUT
                - 409 CONFLICT
                - 410 GONE
                - 411 LENGTH_REQUIRED
                - 412 PRECONDITION_FAILED
                - 413 CONTENT_TOO_LARGE
                - 413 PAYLOAD_TOO_LARGE
                - 414 URI_TOO_LONG
                - 415 UNSUPPORTED_MEDIA_TYPE
                - 416 REQUESTED_RANGE_NOT_SATISFIABLE
                - 417 EXPECTATION_FAILED
                - 418 I_AM_A_TEAPOT
                - 421 MISDIRECTED_REQUEST
                - 422 UNPROCESSABLE_CONTENT
                - 422 UNPROCESSABLE_ENTITY
                - 423 LOCKED
                - 424 FAILED_DEPENDENCY
                - 425 TOO_EARLY
                - 426 UPGRADE_REQUIRED
                - 428 PRECONDITION_REQUIRED
                - 429 TOO_MANY_REQUESTS
                - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
                - 451 UNAVAILABLE_FOR_LEGAL_REASONS
                - 500 INTERNAL_SERVER_ERROR
                - 501 NOT_IMPLEMENTED
                - 502 BAD_GATEWAY
                - 503 SERVICE_UNAVAILABLE
                - 504 GATEWAY_TIMEOUT
                - 505 HTTP_VERSION_NOT_SUPPORTED
                - 506 VARIANT_ALSO_NEGOTIATES
                - 507 INSUFFICIENT_STORAGE
                - 508 LOOP_DETECTED
                - 509 BANDWIDTH_LIMIT_EXCEEDED
                - 510 NOT_EXTENDED
                - 511 NETWORK_AUTHENTICATION_REQUIRED
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Catálogo no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /supplier:
    post:
      tags:
      - Proveedores
      summary: Registrar Proveedor
      description: Registra los usuarios de tipo Proveedor (SUPPLIER). Requiere rol
        ADMIN.
      operationId: createSupplier
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SupplierRequest"
        required: true
      responses:
        "201":
          description: Proveedor registrado exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/SupplierResponse"
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere ADMIN)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Usuario no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /rent/create:
    post:
      tags:
      - Alquileres
      summary: Crear alquiler
      description: Crea un nuevo alquiler de herramientas para el usuario autenticado.
        Requiere rol USER.
      operationId: createRent
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RentCreateRequest"
        required: true
      responses:
        "200":
          description: Alquiler creado exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/Rent"
        "400":
          description: Datos inválidos o error de negocio
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere USER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Recurso no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /pay/{rentId}:
    post:
      tags:
      - Pagos
      summary: Registrar pago de alquiler
      description: Registra el pago asociado a un alquiler. Requiere rol USER.
      operationId: createPayment
      parameters:
      - name: rentId
        in: path
        description: ID del alquiler
        required: true
        schema:
          type: string
          format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
      - name: method
        in: query
        description: Método de pago
        required: true
        schema:
          type: string
          description: Método de pago para el alquiler
          enum:
          - CARD
          - TRANSFER
          example: CARD
        example: CARD
      responses:
        "201":
          description: Pago registrado exitosamente
          content:
            '*/*':
              schema:
                type: string
                enum:
                - 100 CONTINUE
                - 101 SWITCHING_PROTOCOLS
                - 102 PROCESSING
                - 103 EARLY_HINTS
                - 200 OK
                - 201 CREATED
                - 202 ACCEPTED
                - 203 NON_AUTHORITATIVE_INFORMATION
                - 204 NO_CONTENT
                - 205 RESET_CONTENT
                - 206 PARTIAL_CONTENT
                - 207 MULTI_STATUS
                - 208 ALREADY_REPORTED
                - 226 IM_USED
                - 300 MULTIPLE_CHOICES
                - 301 MOVED_PERMANENTLY
                - 302 FOUND
                - 303 SEE_OTHER
                - 304 NOT_MODIFIED
                - 307 TEMPORARY_REDIRECT
                - 308 PERMANENT_REDIRECT
                - 400 BAD_REQUEST
                - 401 UNAUTHORIZED
                - 402 PAYMENT_REQUIRED
                - 403 FORBIDDEN
                - 404 NOT_FOUND
                - 405 METHOD_NOT_ALLOWED
                - 406 NOT_ACCEPTABLE
                - 407 PROXY_AUTHENTICATION_REQUIRED
                - 408 REQUEST_TIMEOUT
                - 409 CONFLICT
                - 410 GONE
                - 411 LENGTH_REQUIRED
                - 412 PRECONDITION_FAILED
                - 413 CONTENT_TOO_LARGE
                - 413 PAYLOAD_TOO_LARGE
                - 414 URI_TOO_LONG
                - 415 UNSUPPORTED_MEDIA_TYPE
                - 416 REQUESTED_RANGE_NOT_SATISFIABLE
                - 417 EXPECTATION_FAILED
                - 418 I_AM_A_TEAPOT
                - 421 MISDIRECTED_REQUEST
                - 422 UNPROCESSABLE_CONTENT
                - 422 UNPROCESSABLE_ENTITY
                - 423 LOCKED
                - 424 FAILED_DEPENDENCY
                - 425 TOO_EARLY
                - 426 UPGRADE_REQUIRED
                - 428 PRECONDITION_REQUIRED
                - 429 TOO_MANY_REQUESTS
                - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
                - 451 UNAVAILABLE_FOR_LEGAL_REASONS
                - 500 INTERNAL_SERVER_ERROR
                - 501 NOT_IMPLEMENTED
                - 502 BAD_GATEWAY
                - 503 SERVICE_UNAVAILABLE
                - 504 GATEWAY_TIMEOUT
                - 505 HTTP_VERSION_NOT_SUPPORTED
                - 506 VARIANT_ALSO_NEGOTIATES
                - 507 INSUFFICIENT_STORAGE
                - 508 LOOP_DETECTED
                - 509 BANDWIDTH_LIMIT_EXCEEDED
                - 510 NOT_EXTENDED
                - 511 NETWORK_AUTHENTICATION_REQUIRED
        "400":
          description: Datos inválidos
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere USER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Alquiler no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /auth/register:
    post:
      tags:
      - Autenticación
      summary: Registrar nuevo usuario
      description: "Crea un nuevo usuario en el sistema. Se asigna automáticamente\
        \ el rol ROLE_USER. Endpoint público, no requiere autenticación."
      operationId: register
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterRequest"
        required: true
      responses:
        "201":
          description: Usuario creado exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          description: Datos inválidos o usuario ya existe
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Error interno del servidor
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/refresh:
    post:
      tags:
      - Autenticación
      summary: Refrescar access token
      description: "Genera un nuevo access token usando un refresh token válido. Endpoint\
        \ público, no requiere autenticación."
      operationId: refresh
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenRequest"
        required: true
      responses:
        "200":
          description: Token refrescado exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "400":
          description: Solicitud inválida
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Refresh token inválido o expirado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/logout:
    post:
      tags:
      - Autenticación
      summary: Cerrar sesión
      description: "Invalida el refresh token, cerrando la sesión del usuario. Requiere\
        \ autenticación."
      operationId: logout
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenRequest"
        required: true
      responses:
        "204":
          description: Sesión cerrada exitosamente
        "400":
          description: Solicitud inválida
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /auth/login:
    post:
      tags:
      - Autenticación
      summary: Iniciar sesión
      description: "Autentica un usuario y retorna un access token y refresh token\
        \ JWT. Endpoint público, no requiere autenticación."
      operationId: login
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
        required: true
      responses:
        "200":
          description: Login exitoso
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "401":
          description: Credenciales inválidas
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Usuario no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/list:
    get:
      tags:
      - Gestión Usuarios
      summary: Listar usuarios
      description: Devuelve una lista de los usuarios registrados (USER/SUPPLIER).
        Requiere rol ADMIN.
      operationId: listUsers
      responses:
        "200":
          description: Lista de usuarios
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UserResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere ADMIN)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tools/list:
    get:
      tags:
      - Catálogo Herramientas
      summary: Listar catálogos del proveedor
      description: Obtiene todos los catálogos de herramientas del proveedor autenticado.
        Requiere rol SUPPLIER.
      operationId: findAllBySupplierId
      responses:
        "200":
          description: Lista de catálogos del proveedor
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ToolCatalog"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tools/list/all:
    get:
      tags:
      - Catálogo Herramientas
      summary: Listar todos los catálogos
      description: Obtiene todos los catálogos de herramientas disponibles. Requiere
        rol USER.
      operationId: findAll
      responses:
        "200":
          description: Lista de todos los catálogos
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ToolCatalog"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere USER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tool/item/get/{catalogId}:
    get:
      tags:
      - Items Herramientas
      summary: Listar ítems de un catálogo
      description: Obtiene todos los ítems asociados a un catálogo. Requiere rol SUPPLIER.
      operationId: getAll
      parameters:
      - name: catalogId
        in: path
        description: ID del catálogo
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: Lista de ítems obtenida
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ToolItem"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Catálogo no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /rent-request/list:
    get:
      tags:
      - Solicitudes de Renta
      summary: Listar solicitudes
      description: Obtiene las solicitudes de renta asociadas al proveedor autenticado.
        Requiere rol SUPPLIER.
      operationId: getRequests
      responses:
        "200":
          description: Lista obtenida exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/RentRequest"
        "403":
          description: No autorizado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /invoices/{rentId}:
    get:
      tags:
      - Facturas
      summary: Obtener factura
      description: Obtiene la factura asociada a una renta. Requiere rol USER.
      operationId: getInvoiceByRentId
      parameters:
      - name: rentId
        in: path
        description: ID de la renta
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: Factura obtenida exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/Invoice"
        "403":
          description: No autorizado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Factura no encontrada
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /countries/{id}:
    get:
      tags:
      - Países
      summary: Obtener país por ID
      description: Retorna el ID del país si existe. Requiere rol ADMIN.
      operationId: getPais
      parameters:
      - name: id
        in: path
        description: ID del país
        required: true
        schema:
          type: string
          format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        "200":
          description: País encontrado
          content:
            '*/*':
              schema:
                type: string
                format: uuid
                description: UUID del país
                example: 550e8400-e29b-41d4-a716-446655440000
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere ADMIN)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: País no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /auth/me:
    get:
      tags:
      - Autenticación
      summary: Obtener usuario autenticado
      description: Retorna la información del usuario actualmente autenticado (perfil
        usuario o proveedor). Requiere autenticación.
      operationId: getCurrentUser
      responses:
        "200":
          description: Usuario obtenido exitosamente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfileResponse"
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Usuario no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tools/delete/{catalogId}:
    delete:
      tags:
      - Catálogo Herramientas
      summary: Eliminar catálogo de herramientas
      description: Elimina un catálogo existente. Requiere rol SUPPLIER.
      operationId: deleteToolCatalog
      parameters:
      - name: catalogId
        in: path
        description: ID del catálogo
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: Eliminado exitosamente
          content:
            '*/*':
              schema:
                type: string
                enum:
                - 100 CONTINUE
                - 101 SWITCHING_PROTOCOLS
                - 102 PROCESSING
                - 103 EARLY_HINTS
                - 200 OK
                - 201 CREATED
                - 202 ACCEPTED
                - 203 NON_AUTHORITATIVE_INFORMATION
                - 204 NO_CONTENT
                - 205 RESET_CONTENT
                - 206 PARTIAL_CONTENT
                - 207 MULTI_STATUS
                - 208 ALREADY_REPORTED
                - 226 IM_USED
                - 300 MULTIPLE_CHOICES
                - 301 MOVED_PERMANENTLY
                - 302 FOUND
                - 303 SEE_OTHER
                - 304 NOT_MODIFIED
                - 307 TEMPORARY_REDIRECT
                - 308 PERMANENT_REDIRECT
                - 400 BAD_REQUEST
                - 401 UNAUTHORIZED
                - 402 PAYMENT_REQUIRED
                - 403 FORBIDDEN
                - 404 NOT_FOUND
                - 405 METHOD_NOT_ALLOWED
                - 406 NOT_ACCEPTABLE
                - 407 PROXY_AUTHENTICATION_REQUIRED
                - 408 REQUEST_TIMEOUT
                - 409 CONFLICT
                - 410 GONE
                - 411 LENGTH_REQUIRED
                - 412 PRECONDITION_FAILED
                - 413 CONTENT_TOO_LARGE
                - 413 PAYLOAD_TOO_LARGE
                - 414 URI_TOO_LONG
                - 415 UNSUPPORTED_MEDIA_TYPE
                - 416 REQUESTED_RANGE_NOT_SATISFIABLE
                - 417 EXPECTATION_FAILED
                - 418 I_AM_A_TEAPOT
                - 421 MISDIRECTED_REQUEST
                - 422 UNPROCESSABLE_CONTENT
                - 422 UNPROCESSABLE_ENTITY
                - 423 LOCKED
                - 424 FAILED_DEPENDENCY
                - 425 TOO_EARLY
                - 426 UPGRADE_REQUIRED
                - 428 PRECONDITION_REQUIRED
                - 429 TOO_MANY_REQUESTS
                - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
                - 451 UNAVAILABLE_FOR_LEGAL_REASONS
                - 500 INTERNAL_SERVER_ERROR
                - 501 NOT_IMPLEMENTED
                - 502 BAD_GATEWAY
                - 503 SERVICE_UNAVAILABLE
                - 504 GATEWAY_TIMEOUT
                - 505 HTTP_VERSION_NOT_SUPPORTED
                - 506 VARIANT_ALSO_NEGOTIATES
                - 507 INSUFFICIENT_STORAGE
                - 508 LOOP_DETECTED
                - 509 BANDWIDTH_LIMIT_EXCEEDED
                - 510 NOT_EXTENDED
                - 511 NETWORK_AUTHENTICATION_REQUIRED
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Catálogo no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /tool/item/delete/{itemId}:
    delete:
      tags:
      - Items Herramientas
      summary: Eliminar ítem de herramienta
      description: Elimina un ítem específico. Requiere rol SUPPLIER.
      operationId: delete
      parameters:
      - name: itemId
        in: path
        description: ID del ítem
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: Eliminado exitosamente
          content:
            '*/*':
              schema:
                type: string
                enum:
                - 100 CONTINUE
                - 101 SWITCHING_PROTOCOLS
                - 102 PROCESSING
                - 103 EARLY_HINTS
                - 200 OK
                - 201 CREATED
                - 202 ACCEPTED
                - 203 NON_AUTHORITATIVE_INFORMATION
                - 204 NO_CONTENT
                - 205 RESET_CONTENT
                - 206 PARTIAL_CONTENT
                - 207 MULTI_STATUS
                - 208 ALREADY_REPORTED
                - 226 IM_USED
                - 300 MULTIPLE_CHOICES
                - 301 MOVED_PERMANENTLY
                - 302 FOUND
                - 303 SEE_OTHER
                - 304 NOT_MODIFIED
                - 307 TEMPORARY_REDIRECT
                - 308 PERMANENT_REDIRECT
                - 400 BAD_REQUEST
                - 401 UNAUTHORIZED
                - 402 PAYMENT_REQUIRED
                - 403 FORBIDDEN
                - 404 NOT_FOUND
                - 405 METHOD_NOT_ALLOWED
                - 406 NOT_ACCEPTABLE
                - 407 PROXY_AUTHENTICATION_REQUIRED
                - 408 REQUEST_TIMEOUT
                - 409 CONFLICT
                - 410 GONE
                - 411 LENGTH_REQUIRED
                - 412 PRECONDITION_FAILED
                - 413 CONTENT_TOO_LARGE
                - 413 PAYLOAD_TOO_LARGE
                - 414 URI_TOO_LONG
                - 415 UNSUPPORTED_MEDIA_TYPE
                - 416 REQUESTED_RANGE_NOT_SATISFIABLE
                - 417 EXPECTATION_FAILED
                - 418 I_AM_A_TEAPOT
                - 421 MISDIRECTED_REQUEST
                - 422 UNPROCESSABLE_CONTENT
                - 422 UNPROCESSABLE_ENTITY
                - 423 LOCKED
                - 424 FAILED_DEPENDENCY
                - 425 TOO_EARLY
                - 426 UPGRADE_REQUIRED
                - 428 PRECONDITION_REQUIRED
                - 429 TOO_MANY_REQUESTS
                - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
                - 451 UNAVAILABLE_FOR_LEGAL_REASONS
                - 500 INTERNAL_SERVER_ERROR
                - 501 NOT_IMPLEMENTED
                - 502 BAD_GATEWAY
                - 503 SERVICE_UNAVAILABLE
                - 504 GATEWAY_TIMEOUT
                - 505 HTTP_VERSION_NOT_SUPPORTED
                - 506 VARIANT_ALSO_NEGOTIATES
                - 507 INSUFFICIENT_STORAGE
                - 508 LOOP_DETECTED
                - 509 BANDWIDTH_LIMIT_EXCEEDED
                - 510 NOT_EXTENDED
                - 511 NETWORK_AUTHENTICATION_REQUIRED
        "401":
          description: No autenticado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: No autorizado (Requiere SUPPLIER)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Ítem no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
components:
  schemas:
    AssignRoleRequest:
      type: object
      description: Solicitud para asignar un rol a un usuario
      properties:
        roleName:
          type: string
          description: "Nombre del rol o authority (ej: USER, ADMIN, ROLE_USER, ROLE_ADMIN)"
          example: ADMIN
          minLength: 1
      required:
      - roleName
    RoleResponse:
      type: object
      description: Rol del sistema
      properties:
        id:
          type: string
          format: uuid
          description: ID del rol
          example: 550e8400-e29b-41d4-a716-446655440001
        name:
          type: string
          description: Nombre del rol
          example: USER
        authority:
          type: string
          description: Authority del rol
          example: ROLE_USER
    UserResponse:
      allOf:
      - $ref: "#/components/schemas/ProfileResponse"
      - type: object
        properties:
          id:
            type: string
            format: uuid
            description: ID del usuario
            example: 550e8400-e29b-41d4-a716-446655440000
          name:
            type: string
            description: Nombre del usuario
            example: Ponscio
          email:
            type: string
            description: Email del usuario
            example: user@example.com
          roles:
            type: array
            description: Roles asignados al usuario
            items:
              $ref: "#/components/schemas/RoleResponse"
            uniqueItems: true
          status:
            type: string
            description: Estado del usuario
            enum:
            - ACTIVE
            - BLOCKED
            - INACTIVE
            example: ACTIVE
      description: Información del usuario
    ErrorResponse:
      type: object
      description: Estructura estándar para respuestas de error
      properties:
        timestamp:
          type: string
          format: date-time
          description: Marca de tiempo del error
          example: 2023-10-25T10:30:00
        status:
          type: integer
          format: int32
          description: Código de estado HTTP
          example: 404
        error:
          type: string
          description: Tipo de error
          example: Not Found
        message:
          type: string
          description: Mensaje detallado del error
          example: El recurso solicitado no existe
        path:
          type: string
          description: Ruta de la solicitud que generó el error
          example: /api/resource/1
    ProfileUpdate:
      description: Interfaz base para actualizaciones de perfil
    SupplierUpdateRequest:
      allOf:
      - $ref: "#/components/schemas/ProfileUpdate"
      - type: object
        properties:
          name:
            type: string
            description: Nombre del usuario
            example: Ponscio
            maxLength: 16
            minLength: 3
          email:
            type: string
            format: email
            description: Email del usuario
            example: user@example.com
            minLength: 1
          companyName:
            type: string
            description: Nombre de la empresa
            example: DeWalt
            minLength: 1
          addressDesc:
            type: string
            description: Dirección del Supplier
            example: calle 10N....
            minLength: 1
          postalCode:
            type: string
            description: Codigo postaldel Supplier
            example: 1234
            minLength: 1
          cityName:
            type: string
            description: Ciudad del Supplier
            example: Bogota D.C.
            minLength: 1
          countryIsocode:
            type: string
            description: IsoCode del pais del Supplier
            example: "COL, MEX, ARG"
            minLength: 1
      required:
      - addressDesc
      - cityName
      - companyName
      - countryIsocode
      - email
      - name
      - postalCode
    SupplierUpdateResponse:
      allOf:
      - $ref: "#/components/schemas/ProfileUpdate"
      - type: object
        properties:
          name:
            type: string
            description: Nombre del usuario
            example: Ponscio
            maxLength: 16
            minLength: 3
          email:
            type: string
            format: email
            description: Email del usuario
            example: user@example.com
            minLength: 1
          companyName:
            type: string
            description: Nombre de la empresa
            example: DeWalt
            minLength: 1
          addressId:
            type: string
            description: Direcion del Supplier
            example: calle 10N....
            minLength: 1
      required:
      - addressId
      - companyName
      - email
      - name
    UpdateRequest:
      type: object
      description: Solicitud para actualizar datos de perfil (usuario o proveedor)
      properties:
        name:
          type: string
          description: Nombre del usuario
          example: Ponscio
          maxLength: 16
          minLength: 3
        email:
          type: string
          format: email
          description: Email del usuario
          example: user@example.com
          minLength: 1
        companyName:
          type: string
          description: Nombre de la empresa
          example: DeWalt
          minLength: 1
        addressDesc:
          type: string
          description: Dirección del Supplier
          example: calle 10N....
          minLength: 1
        postalCode:
          type: string
          description: Codigo postaldel Supplier
          example: 1234
          minLength: 1
        cityName:
          type: string
          description: Ciudad del Supplier
          example: Bogota D.C.
          minLength: 1
        countryIsocode:
          type: string
          description: IsoCode del pais del Supplier
          example: "COL, MEX, ARG"
          minLength: 1
        profile:
          description: Perfil extra para el proveedor
          example: "{companyName: 'sas'...}"
          oneOf:
          - $ref: "#/components/schemas/SupplierUpdateRequest"
          - $ref: "#/components/schemas/SupplierUpdateResponse"
          - $ref: "#/components/schemas/UserUpdateRequest"
          - $ref: "#/components/schemas/UserUpdateResponse"
      required:
      - addressDesc
      - cityName
      - companyName
      - countryIsocode
      - email
      - name
      - postalCode
    UserUpdateRequest:
      allOf:
      - $ref: "#/components/schemas/ProfileUpdate"
      - type: object
        properties:
          name:
            type: string
            description: El Nombre de usuario
            example: usuario123
            minLength: 1
          email:
            type: string
            format: email
            description: Email de usuario
            example: usuario@email.com
            minLength: 1
      required:
      - email
      - name
    UserUpdateResponse:
      allOf:
      - $ref: "#/components/schemas/ProfileUpdate"
      - type: object
        properties:
          name:
            type: string
            description: El Nombre de usuario
            example: usuario123
          email:
            type: string
            description: Email de usuario
            example: usuario@email.com
      required:
      - email
      - name
    StatusUserRequest:
      type: object
      description: Solicitud de cambio de estado de usuario (activar/bloquear)
      properties:
        userId:
          type: string
          format: uuid
          description: ID del usuario
          example: 550e8400-e29b-41d4-a716-446655440000
        status:
          type: string
          description: "Estado del usuario (ACTIVE, BLOCKED, INACTIVE)"
          enum:
          - ACTIVE
          - BLOCKED
          - INACTIVE
          example: BLOCKED
      required:
      - status
      - userId
    StatusUserResponse:
      type: object
      description: Respuesta tras actualizar el estado de un usuario
      properties:
        userId:
          type: string
          format: uuid
          description: ID del usuario
          example: 550e8400-e29b-41d4-a716-446655440000
        status:
          type: string
          description: Nuevo estado del usuario
          enum:
          - ACTIVE
          - BLOCKED
          - INACTIVE
          example: BLOCKED
    ToolUpdateStatusRequest:
      type: object
      description: Solicitud para actualizar el estado físico de un ítem
      properties:
        status:
          type: string
          description: Nuevo estado del ítem
          enum:
          - AVAILABLE
          - UNAVAILABLE
          - DAMAGED
          - MAINTENANCE
          example: DAMAGED
      required:
      - status
    ChangePasswordRequest:
      type: object
      description: Solicitud para cambiar la contraseña del usuario
      properties:
        currentPassword:
          type: string
          description: Contraseña actual
          example: oldpassword123
          minLength: 1
        newPassword:
          type: string
          description: Nueva contraseña (mínimo 6 caracteres)
          example: newpassword456
          maxLength: 2147483647
          minLength: 6
      required:
      - currentPassword
      - newPassword
    SupplierRequest:
      type: object
      description: Solicitud para registrar un nuevo proveedor (usuario con rol SUPPLIER)
      properties:
        name:
          type: string
          description: Nombre del usuario
          example: Ponscio
          maxLength: 16
          minLength: 3
        email:
          type: string
          format: email
          description: Email del usuario
          example: user@example.com
          minLength: 1
        password:
          type: string
          description: Contraseña del usuario (mínimo 6 caracteres)
          example: password123
          maxLength: 2147483647
          minLength: 6
        companyName:
          type: string
          description: Nombre de la empresa
          example: DeWalt
          minLength: 1
        addressDesc:
          type: string
          description: Dirección del Supplier
          example: calle 10N....
          minLength: 1
        postalCode:
          type: string
          description: Codigo postaldel Supplier
          example: 1234
          minLength: 1
        cityName:
          type: string
          description: Ciudad del Supplier
          example: Bogota D.C.
          minLength: 1
        countryIsocode:
          type: string
          description: IsoCode del pais del Supplier
          example: "COL, MEX, ARG"
          minLength: 1
      required:
      - addressDesc
      - cityName
      - companyName
      - countryIsocode
      - email
      - name
      - password
      - postalCode
    Address:
      type: object
      properties:
        id:
          type: string
          format: uuid
        address:
          type: string
        postalCode:
          type: string
        city:
          $ref: "#/components/schemas/City"
    City:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        country:
          $ref: "#/components/schemas/Country"
    Country:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        isocode:
          type: string
    SupplierResponse:
      allOf:
      - $ref: "#/components/schemas/ProfileResponse"
      - type: object
        properties:
          id:
            type: string
            format: uuid
            description: ID del usuario
            example: 550e8400-e29b-41d4-a716-446655440000
          name:
            type: string
            description: Nombre del proveedor
            example: Ponscio
          email:
            type: string
            description: Email del proveedor
            example: proveedor@example.com
          roles:
            type: array
            description: Roles asignados al usuario
            items:
              $ref: "#/components/schemas/RoleResponse"
            uniqueItems: true
          status:
            type: string
            description: Estado del usuario
            enum:
            - ACTIVE
            - BLOCKED
            - INACTIVE
            example: ACTIVE
          companyName:
            type: string
            description: Nombre de la empresa
            example: DeWalt
          address:
            $ref: "#/components/schemas/Address"
            description: Dirección del proveedor
      description: Información del Proveedor
    RentCreateRequest:
      type: object
      description: Solicitud para crear un alquiler de herramientas
      properties:
        productsId:
          type: array
          description: IDs de los ítems de herramientas a alquilar
          example:
          - 550e8400-e29b-41d4-a716-446655440000
          items:
            type: string
            format: uuid
        startDate:
          type: string
          format: date-time
          description: Fecha y hora de inicio del alquiler
          example: 2024-01-15T09:00:00
        endDate:
          type: string
          format: date-time
          description: Fecha y hora de fin del alquiler
          example: 2024-01-20T18:00:00
        addressDesc:
          type: string
          description: Dirección de entrega/recogida
          example: calle 10N....
          minLength: 1
        postalCode:
          type: string
          description: Codigo postaldel Supplier
          example: 1234
          minLength: 1
        cityName:
          type: string
          description: Ciudad del Supplier
          example: Bogota D.C.
          minLength: 1
        countryIsocode:
          type: string
          description: IsoCode del pais del Supplier
          example: "COL, MEX, ARG"
          minLength: 1
        paymentMethod:
          type: string
          description: Método de pago
          enum:
          - CARD
          - TRANSFER
          example: CARD
      required:
      - addressDesc
      - cityName
      - countryIsocode
      - endDate
      - paymentMethod
      - postalCode
      - productsId
      - startDate
    Rent:
      type: object
      description: Alquiler de herramientas asociado a un usuario
      properties:
        id:
          type: string
          format: uuid
        startDate:
          type: string
          format: date-time
        endDate:
          type: string
          format: date-time
        totalAmount:
          type: number
        toolItem:
          type: array
          items:
            $ref: "#/components/schemas/ToolItem"
          uniqueItems: true
        status:
          type: string
          enum:
          - RENTED
          - COMPLETED
          - CANCELED
          - PENDING
        user:
          $ref: "#/components/schemas/User"
        address:
          $ref: "#/components/schemas/Address"
    Role:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        authority:
          type: string
    SupplierM:
      type: object
      properties:
        userId:
          type: string
          format: uuid
        companyName:
          type: string
        address:
          $ref: "#/components/schemas/Address"
    ToolCatalog:
      type: object
      description: Catálogo de una herramienta ofrecida por un proveedor
      properties:
        id:
          type: string
          format: uuid
        supplier:
          $ref: "#/components/schemas/SupplierM"
        name:
          type: string
        price:
          type: number
        status:
          type: string
          description: Estado del catálogo de herramienta
          enum:
          - AVAIBLE
          - UNAVAIABLE
          example: AVAIBLE
        description:
          type: string
        imageUrl:
          type: string
    ToolItem:
      type: object
      description: Ítem físico de una herramienta (unidad disponible para alquiler)
      properties:
        id:
          type: string
          format: uuid
        toolCatalog:
          $ref: "#/components/schemas/ToolCatalog"
        status:
          type: string
          description: Estado físico del ítem de herramienta
          enum:
          - AVAILABLE
          - UNAVAILABLE
          - DAMAGED
          - MAINTENANCE
          example: AVAILABLE
        avaiable:
          type: boolean
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        email:
          type: string
        password:
          type: string
        roles:
          type: array
          items:
            $ref: "#/components/schemas/Role"
          uniqueItems: true
        status:
          type: string
          description: Estado del usuario en el sistema
          enum:
          - ACTIVE
          - BLOCKED
          - INACTIVE
          example: ACTIVE
        active:
          type: boolean
    RegisterRequest:
      type: object
      description: Solicitud de registro de nuevo usuario
      properties:
        name:
          type: string
          description: Nombre del usuario
          example: Ponscio
          maxLength: 16
          minLength: 3
        email:
          type: string
          format: email
          description: Email del usuario
          example: user@example.com
          minLength: 1
        password:
          type: string
          description: Contraseña del usuario (mínimo 6 caracteres)
          example: password123
          maxLength: 2147483647
          minLength: 6
      required:
      - email
      - name
      - password
    RefreshTokenRequest:
      type: object
      description: Solicitud para refrescar el access token
      properties:
        refreshToken:
          type: string
          description: Refresh token obtenido del login
          example: 550e8400-e29b-41d4-a716-446655440000
          minLength: 1
      required:
      - refreshToken
    LoginResponse:
      type: object
      description: Respuesta de inicio de sesión con tokens JWT
      properties:
        accessToken:
          type: string
          description: Access token JWT
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        refreshToken:
          type: string
          description: Refresh token para renovar el access token
          example: 550e8400-e29b-41d4-a716-446655440000
        tokenType:
          type: string
          description: Tipo de token
          example: Bearer
        expiresIn:
          type: integer
          format: int64
          description: Tiempo de expiración en segundos
          example: 900
    LoginRequest:
      type: object
      description: Solicitud de inicio de sesión
      properties:
        email:
          type: string
          format: email
          description: Email del usuario
          example: user@example.com
          minLength: 1
        password:
          type: string
          description: Contraseña del usuario
          example: password123
          minLength: 1
      required:
      - email
      - password
    RentRequest:
      type: object
      properties:
        id:
          type: string
          format: uuid
        rent:
          $ref: "#/components/schemas/Rent"
        createdAt:
          type: string
          format: date-time
        status:
          type: string
          enum:
          - ACCEPTED
          - PENDING
          - DENEGED
    Invoice:
      type: object
      properties:
        id:
          type: string
          format: uuid
        totalAmount:
          type: number
        date:
          type: string
          format: date-time
        rentId:
          $ref: "#/components/schemas/Rent"
    ProfileResponse:
      description: Interfaz base para respuestas de perfil (Usuario o Proveedor)
  securitySchemes:
    bearerAuth:
      type: http
      description: JWT token obtenido del endpoint /auth/login
      name: bearerAuth
      scheme: bearer
      bearerFormat: JWT
